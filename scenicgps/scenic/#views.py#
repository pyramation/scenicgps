# Create your views here.
from scenicgps.scenic.models import *
from scenicgps.utils import *





def index(request):
	return success()
@postmethod
def putRoute(request):

	
	
	try:
		try:
			rte = Route.objects.get(plString = plString)
		except:
			rte = Route(plString = plString)
			rte.save()
		try:
			dev=Device.objects.get(device=device)
		except:
			dev=Device(device=device)
			dev.save()

		try:
			rate = Rating.objects.get(route = rte, device = dev)
			rate.rating = rating
			rate.save()
		except:
			Rating(route = rte, device = dev, rating = rating).save()


		return success()
 	except:
		return error()


def ratePlace(request):
	lat = float(request.GET['lat'])
	lng = float(request.GET['lng'])
	rating = int(request.GET['rating'])
	device = request.GET['device']
	try:
		try:
			gp = GeoPt.objects.get(lat = lat, lng = lng)
		except:
			gp = GeoPt(lat=lat, lng=lng)
			gp.save()
		try:
			dev=Device.objects.get(device=device)
		except:
			dev=Device(device=device)
			dev.save()

		try:
			rate = PlaceRating.objects.get(geopt = gp, device = dev)
			rate.rating = rating
			rate.save()
		except:
			PlaceRating(geopt=gp, device=dev, rating=rating).save()


		return success()
 	except:
		return error()


